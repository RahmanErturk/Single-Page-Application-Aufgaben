<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registrierungsformular</title>
    <link rel="stylesheet" href="./style.css" />
    <script
      src="https://kit.fontawesome.com/fda1bfc468.js"
      crossorigin="anonymous"
    ></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.querySelector("form");
        const birthday = document.querySelector("#birthday");
        const gtc = document.querySelector("#GTC");
        const data = document.getElementById("data");
        const password = document.querySelector("#password");
        const passConfirm = document.querySelector("#pass-confirm");
        const passConfirmContainer =
          document.querySelectorAll(".pass-container");

        form.addEventListener("submit", (event) => {
          event.preventDefault();

          if (password.value !== passConfirm.value) {
            const passError = document.createElement("p");
            passError.innerText = "Die Passwörter müssen übereinstimmen";
            passError.classList.add("error");

            passConfirmContainer[1].previousElementSibling.append(passError);
          }

          const birthdayOfUser = new Date(birthday.value);
          const currentDate = Date.now(); // in Millisekunden
          const age = currentDate - birthdayOfUser.getTime(); // in Millisekunden;
          const timeSpan = 18 * 365 * 24 * 60 * 60 * 1000;

          if (age < timeSpan) {
            alert(
              "Sie müssen gleich oder alter als 18 sein, um zu registrieren."
            );
          }

          if (data.checked === false || gtc.checked === false) {
            alert("Sie müssen zustimmen.");
          }
          // form.submit();
          // form.reset();
        });

        const togglePassword = document.querySelector("#pass-icon");

        togglePassword.addEventListener("click", () => {
          const type =
            password.getAttribute("type") === "password" ? "text" : "password";
          password.type = type;
        });

        const togglePasswordConfirm =
          document.querySelector("#pass-confirm-icon");

        togglePasswordConfirm.addEventListener("click", () => {
          const type =
            passConfirm.getAttribute("type") === "password"
              ? "text"
              : "password";
          passConfirm.type = type;
        });
      });
    </script>
  </head>
  <body>
    <h1>Registrierungsformular</h1>
    <div class="container">
      <form>
        <label for="forname">Vorname:</label>
        <input type="text" id="forname" class="input-height input" required />
        <br />

        <label for="surname">Nachname:</label>
        <input type="text" id="surname" class="input-height input" />
        <br />

        <label for="email">E-Mail:</label>
        <input type="email" id="email" class="input-height input" required />
        <br />

        <label for="password">Passwort:</label>
        <div class="pass-container">
          <input
            type="password"
            id="password"
            class="input-height input"
            required
          />
          <i class="fa-regular fa-eye" id="pass-icon"></i><br /><br /><br />
        </div>

        <label for="pass-confirm">Passwort Wiederholen:</label>
        <div class="pass-container">
          <input
            type="password"
            id="pass-confirm"
            class="input-height input"
            required
          />
          <i class="fa-regular fa-eye" id="pass-confirm-icon"></i><br />
        </div>
        <br /><br />

        <label for="birthday">Geburtstag:</label>
        <input type="date" id="birthday" class="input-height input" required />
        <br />

        <div class="sex">
          <label>Geschlecht:</label>
          <div class="radio">
            <label for="man">
              männlich
              <input type="radio" id="man" value="männlich" />
            </label>

            <label for="woman">
              weiblich
              <input type="radio" id="woman" value="weiblich" />
            </label>
          </div>
        </div>
        <br />

        <label for="intro">Kleine Vorstellung:</label>
        <textarea
          name="Vorstellung"
          id="intro"
          class="input"
          cols="30"
          rows="10"
          placeholder="Kleine Vorstellung"
        ></textarea>
        <br />

        <label for="GTC">
          <input type="checkbox" id="GTC" />
          Ich stimme den allgemeinen Geschäftsbedingungen zu.
        </label>
        <br />

        <label for="data">
          <input type="checkbox" id="data" />
          Ich stimme die Datenschutzerklärungen zu.
        </label>
        <br />
        <div class="buttons">
          <input type="submit" value="Speichern" class="submit-btn" />
          <input type="reset" value="Zurücksetzen" class="reset-btn" />
        </div>
      </form>
    </div>
  </body>
</html>
